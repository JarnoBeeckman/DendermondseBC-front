(this.webpackJsonptoolbox=this.webpackJsonptoolbox||[]).push([[0],{11:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return g}));var r=n(3),a=n(10),c=n(2),s=n.n(c),i=n(0),u=n(16),o=n(23),l=n(14),j=n(1),d=Object(i.createContext)(),b=l.token_key;function p(t){if(!t)return{};var n=t.split(".")[1],r=e.from(n,"base64").toString("ascii");return JSON.parse(r)}function h(e){return e?("number"!==typeof e&&(e=Number(e)),isNaN(e)?null:new Date(1e3*e)):null}var f=function(){return Object(i.useContext)(d)},O=function(){var e=f(),t=e.loading,n=e.error,r=e.token,a=e.lid,c=e.ready,s=e.hasRole,i=e.component;return{loading:t,error:n,token:r,lid:a,ready:c,isAuthed:Boolean(r),hasRole:s,component:i}},x=function(){return f().login},m=function(){return f().logout},g=function(e){var t=e.children,n=Object(i.useState)(!1),c=Object(a.a)(n,2),l=c[0],f=c[1],O=Object(i.useState)(!1),x=Object(a.a)(O,2),m=x[0],g=x[1],v=Object(i.useState)(""),w=Object(a.a)(v,2),k=w[0],N=w[1],y=Object(i.useState)(localStorage.getItem(b)),B=Object(a.a)(y,2),S=B[0],C=B[1],L=Object(i.useState)(null),A=Object(a.a)(L,2),z=A[0],D=A[1],I=Object(i.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t,n){var r,a,c,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p(t),a=r.exp,c=r.userId,i=h(a),(l=i>=new Date)?localStorage.setItem(b,t):(localStorage.removeItem(b),t=null,i&&N("Session expired, sign in again")),u.b(t),f(t&&l),C(t),n||!l){e.next=11;break}return e.next=10,o.a(c);case 10:n=e.sent;case 11:D(n);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]);Object(i.useEffect)((function(){I(S)}),[S,I]);var T=Object(i.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t){var n,r,a,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mail,r=t.wachtwoord,e.prev=1,g(!0),N(""),e.next=6,o.b(n,r);case 6:return a=e.sent,c=a.token,i=a.user,e.next=11,I(c,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),console.error(e.t0),N("Login failed"),e.abrupt("return",!1);case 19:return e.prev=19,g(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,14,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[I]),F=Object(i.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),N(""),e.next=5,o.c(t);case 5:return n=e.sent,r=n.token,a=n.lid,e.next=10,I(r,a);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),N(e.t0),e.abrupt("return",!1);case 17:return e.prev=17,g(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[I]),J=Object(i.useCallback)((function(){I(null),D(null)}),[I]),M=Object(i.useCallback)((function(e){return!!z&&z.roles.include(z)}),[z]),K=Object(i.useMemo)((function(){return{loading:m,error:k,token:S,lid:z,login:T,logout:J,register:F,ready:l,hasRole:M}}),[m,k,S,z,T,J,F,l,M]);return Object(j.jsx)(d.Provider,{value:K,children:t})}}).call(this,n(49).Buffer)},14:function(e){e.exports=JSON.parse('{"url":"https://dendermondse-bc.herokuapp.com/api/","token_key":"auth_token","pages":{"lid":[["Account gegevens","accountBeheren"],["Kledij bestellen","kledijBestellen"]],"kapitein":[["Onkosten","onkosten"]],"trainer":[["Trainingsuren","trainingsuren"],["Aanwezigheden","aanwezigheden"]],"admin":[["Leden beheren","lidBeheer"],["Mail versturen","stuurMail"]],"penningmeester":[["BV aanpassingen","aanpassenBV"],["Trainers vergoedingen","vergoedingTrainers"],["Kapiteins onkosten","onkostenKapitein"],["Bestuurders onkosten","onkostenBestuur"]],"beheerder":[["Leden beheren","beheerLeden"]]}}')},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(38),a=n.n(r),c=n(14),s=a.a.create({baseURL:c.url}),i=function(e){e?s.defaults.headers.Authorization="Bearer ".concat(e):delete s.defaults.headers.Authorization}},23:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o}));var r=n(3),a=n(2),c=n.n(a),s=n(16),i=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("account/login",{mail:t,wachtwoord:n});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(c.a.mark((function e(t,n,r,a,i,u,o,l,j,d,b){var p,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("account",{mail:t,wachtwoord:n,voornaam:r,achternaam:a,adres:i,postcode:u,woonplaats:o,geslacht:l,geboortedatum:j,gsm:d,spelertype:b});case 2:return p=e.sent,h=p.data,e.abrupt("return",h);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,s,i,u,o,l,j){return e.apply(this,arguments)}}(),o=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("account/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},47:function(e,t,n){},48:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(37),s=n.n(c),i=(n(47),n(48),n(18)),u=n(4),o=n(11),l=n(17),j=n(39),d=n(1),b=["children"];function p(e){var t=e.children,n=Object(j.a)(e,b),r=Object(o.d)().isAuthed,a=Object(u.h)().pathname;return Object(d.jsx)(u.b,Object(l.a)(Object(l.a)({},n),{},{children:r?t:Object(d.jsx)(u.a,{from:a,to:"/login"})}))}var h=n(3),f=n(2),O=n.n(f),x=n(14);function m(){var e=Object(o.d)(),t=e.lid,n=e.loading,a=e.error,c=Object(o.c)(),s=Object(u.g)(),i=Object(r.useCallback)(Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)}))),[c]),l=Object(r.useCallback)(function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.push("/".concat(t)),e.abrupt("return");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]),j=Object(r.memo)((function(e){return Object(d.jsx)("button",{className:"keuzemenubutton",onClick:e.click,children:e.page},e.page)}));return t?t.roles.includes("beheerder")?Object(d.jsxs)("div",{className:"buttongrid flex-w",children:[x.pages.beheerder.map((function(e){return Object(d.jsx)(j,{page:e[0],click:function(){return l(e[1])}},e[0])})),Object(d.jsx)(j,{page:"Log uit",click:i},"Log uit")]}):Object(d.jsxs)("div",{className:"buttongrid flex-w",children:[t.roles.map((function(e){return x.pages[e].map((function(e){return Object(d.jsx)(j,{page:e[0],click:function(){return l(e[1])}},e[0])}))})),Object(d.jsx)(j,{page:"Log uit",click:i},"log uit")]}):n?Object(d.jsx)("div",{children:"Loading..."}):a?Object(d.jsx)("div",{children:a}):Object(d.jsx)(d.Fragment,{})}var g=n.p+"static/media/logoBC.dcd27ad3.jpg";function v(){return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"cntr",children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("img",{src:g,alt:"logo"}),Object(d.jsx)(m,{})]})})})}var w=n(42);n(77);function k(){var e=Object(o.b)(),t=Object(u.g)(),n=Object(o.d)(),a=n.loading,c=n.error,s=n.isAuthed,i=Object(w.a)(),j=i.register,b=i.handleSubmit,p=i.formState.errors;Object(r.useEffect)((function(){s&&t.push("/")}));var f=Object(r.useCallback)(function(){var n=Object(h.a)(O.a.mark((function n(r){var a,c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.mail,c=r.wachtwoord,n.next=3,e({mail:a,wachtwoord:c});case 3:n.sent&&t.push("/");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"conlogin",children:Object(d.jsx)("div",{className:"wraplogin",children:Object(d.jsxs)("form",{className:"loginform validate-form flex-sb flex-w",onSubmit:b(f),children:[Object(d.jsx)("span",{className:"loginformtitle",children:"Login"}),c?Object(d.jsx)("p",{className:"errorlogin",children:JSON.stringify(c)}):null,Object(d.jsxs)("div",{className:"wrapinput validate-input",children:[Object(d.jsx)("input",Object(l.a)({id:"mail",className:"input",type:"text",defaultValue:"","data-cy":"mail",placeholder:"mail"},j("mail",{required:"Dit is vereist"}))),Object(d.jsx)("span",{className:"focusinput"})]}),p.mail&&Object(d.jsx)("p",{children:p.mail.message}),Object(d.jsxs)("div",{className:"wrapinput validate-input",children:[Object(d.jsx)("input",Object(l.a)({id:"pw",className:"input",type:"password","data-cy":"wachtwoord",placeholder:"wachtwoord"},j("wachtwoord",{required:"Dit is vereist"}))),Object(d.jsx)("span",{className:"focusinput"})]}),p.wachtwoord&&Object(d.jsx)("p",{children:p.wachtwoord.message}),Object(d.jsx)("div",{className:"conloginform",children:Object(d.jsx)("button",{type:"submit",className:"loginbutton",disabled:a,"data-cy":"login",children:"Log in"})})]})})})})}function N(){return Object(d.jsx)("div",{children:"test"})}function y(){return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"cntr",children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("img",{src:g,alt:"logo"}),Object(d.jsx)(N,{})]})})})}var B=function(){return Object(d.jsx)(o.a,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{exact:!0,path:"/login",children:Object(d.jsx)(k,{})}),Object(d.jsx)(u.b,{exact:!0,path:"/DendermondseBC-front",children:Object(d.jsx)(u.a,{to:"/"})}),Object(d.jsx)(p,{exact:!0,path:"/",children:Object(d.jsx)(v,{})}),Object(d.jsx)(p,{exact:!0,path:"/accountBeheren",children:Object(d.jsx)(y,{})}),Object(d.jsx)(p,{exact:!0,path:"/kledijBestellen"}),Object(d.jsx)(p,{exact:!0,path:"/onkosten"}),Object(d.jsx)(p,{exact:!0,path:"/trainingsuren"}),Object(d.jsx)(p,{exact:!0,path:"/aanwezigheden"}),Object(d.jsx)(p,{exact:!0,path:"lidBeheer"}),Object(d.jsx)(p,{exact:!0,path:"/stuurMail"}),Object(d.jsx)(p,{exact:!0,path:"/aanpassenBV"}),Object(d.jsx)(p,{exact:!0,path:"/vergoedingTrainers"}),Object(d.jsx)(p,{exact:!0,path:"/onkostenKapitein"}),Object(d.jsx)(p,{exact:!0,path:"/onkostenBestuur"}),Object(d.jsx)(p,{exact:!0,path:"/beheerLeden"})]})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),S()}},[[78,1,2]]]);
//# sourceMappingURL=main.464a9641.chunk.js.map