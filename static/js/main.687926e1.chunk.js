(this.webpackJsonptoolbox=this.webpackJsonptoolbox||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"url":"https://dendermondse-bc.herokuapp.com/api/","token_key":"auth_token","pages":{"lid":[["Account gegevens","accountBeheren"],["Kledij bestellen","kledijBestellen"]],"kapitein":[["Onkosten","onkosten"]],"trainer":[["Trainingsuren","trainingsuren"],["Aanwezigheden","aanwezigheden"]],"admin":[["Leden beheren","lidBeheer"],["Mail versturen","stuurMail"]],"penningmeester":[["BV aanpassingen","aanpassenBV"],["Trainers vergoedingen","vergoedingTrainers"],["Kapiteins onkosten","onkostenKapitein"],["Bestuurders onkosten","onkostenBestuur"]],"beheerder":[["Leden beheren","beheerLeden"]]}}')},17:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var c=a(39),r=a.n(c),n=a(16),s=r.a.create({baseURL:n.url}),i=function(e){e?s.defaults.headers.Authorization="Bearer ".concat(e):delete s.defaults.headers.Authorization}},21:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return o}));var c=a(3),r=a(2),n=a.n(r),s=a(17),i=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("account/login",{mail:t,wachtwoord:a});case 2:return c=e.sent,r=c.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(n.a.mark((function e(t,a,c,r,i,l,u,o,j,d,b){var h,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("account",{mail:t,wachtwoord:a,voornaam:c,achternaam:r,adres:i,postcode:l,woonplaats:u,geslacht:o,geboortedatum:j,gsm:d,spelertype:b});case 2:return h=e.sent,p=h.data,e.abrupt("return",p);case 5:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s,i,l,u,o,j){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("account/".concat(t));case 2:return a=e.sent,c=a.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(n.a.mark((function e(t,a,c){var r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("account/wachtwoord/".concat(t),{current:a,wachtwoord:c});case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}()},47:function(e,t,a){},48:function(e,t,a){},6:function(e,t,a){"use strict";(function(e){a.d(t,"e",(function(){return x})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return g}));var c=a(3),r=a(7),n=a(2),s=a.n(n),i=a(1),l=a(17),u=a(21),o=a(16),j=a(0),d=Object(i.createContext)(),b=o.token_key;function h(t){if(!t)return{};var a=t.split(".")[1],c=e.from(a,"base64").toString("ascii");return JSON.parse(c)}function p(e){return e?("number"!==typeof e&&(e=Number(e)),isNaN(e)?null:new Date(1e3*e)):null}var O=function(){return Object(i.useContext)(d)},x=function(){var e=O(),t=e.loading,a=e.error,c=e.token,r=e.lid,n=e.ready,s=e.hasRole;return{loading:t,error:a,token:c,lid:r,ready:n,isAuthed:Boolean(c),hasRole:s}},f=function(){return O().login},m=function(){return O().changePassword},v=function(){return O().logout},g=function(e){var t=e.children,a=Object(i.useState)(!1),n=Object(r.a)(a,2),o=n[0],O=n[1],x=Object(i.useState)(!1),f=Object(r.a)(x,2),m=f[0],v=f[1],g=Object(i.useState)(""),w=Object(r.a)(g,2),k=w[0],N=w[1],y=Object(i.useState)(localStorage.getItem(b)),C=Object(r.a)(y,2),S=C[0],B=C[1],L=Object(i.useState)(null),z=Object(r.a)(L,2),F=z[0],A=z[1],D=Object(i.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t,a){var c,r,n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=h(t),r=c.exp,n=c.userId,i=p(r),(o=i>=new Date)?localStorage.setItem(b,t):(localStorage.removeItem(b),t=null,i&&N("Session expired, sign in again")),l.b(t),O(t&&o),B(t),a||!o){e.next=11;break}return e.next=10,u.b(n);case 10:a=e.sent;case 11:A(a);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[]);Object(i.useEffect)((function(){D(S)}),[S,D]);var T=Object(i.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var a,c,r,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.mail,c=t.wachtwoord,e.prev=1,v(!0),N(""),e.next=6,u.c(a,c);case 6:return r=e.sent,n=r.token,i=r.user,e.next=11,D(n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(1),console.error(e.t0),N("Login failed"),e.abrupt("return",!1);case 19:return e.prev=19,v(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,14,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[D]),I=Object(i.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var a,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),N(""),e.next=5,u.d(t);case 5:return a=e.sent,c=a.token,r=a.lid,e.next=10,D(c,r);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),N(e.t0),e.abrupt("return",!1);case 17:return e.prev=17,v(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[D]),P=Object(i.useCallback)((function(){D(null),A(null)}),[D]),q=Object(i.useCallback)((function(e){return!!F&&F.roles.include(e)}),[F]),J=Object(i.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t,a,c){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),N(""),e.next=5,u.a(t,a,c);case 5:return e.abrupt("return",200);case 8:if(e.prev=8,e.t0=e.catch(0),403!==(null===(r=e.t0.response)||void 0===r?void 0:r.status)){e.next=12;break}return e.abrupt("return",403);case 12:return e.abrupt("return",!1);case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,8,13,16]])})));return function(t,a,c){return e.apply(this,arguments)}}(),[]),M=Object(i.useMemo)((function(){return{loading:m,error:k,token:S,lid:F,login:T,logout:P,register:I,ready:o,hasRole:q,changePassword:J}}),[m,k,S,F,T,P,I,o,q,J]);return Object(j.jsx)(d.Provider,{value:M,children:t})}}).call(this,a(49).Buffer)},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(38),s=a.n(n),i=(a(47),a(48),a(15)),l=a(4),u=a(6),o=a(12),j=a(40),d=a(0),b=["children"];function h(e){var t=e.children,a=Object(j.a)(e,b),c=Object(u.e)().isAuthed,r=Object(l.h)().pathname;return Object(d.jsx)(l.b,Object(o.a)(Object(o.a)({},a),{},{children:c?t:Object(d.jsx)(l.a,{from:r,to:"/login"})}))}var p=a(3),O=a(2),x=a.n(O),f=a(16);function m(){var e=Object(u.e)(),t=e.lid,a=e.loading,r=e.error,n=Object(u.d)(),s=Object(l.g)(),i=Object(c.useCallback)(Object(p.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),[n]),o=Object(c.useCallback)(function(){var e=Object(p.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.push("/".concat(t)),e.abrupt("return");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]),j=Object(c.memo)((function(e){return Object(d.jsx)("button",{className:"keuzemenubutton",onClick:e.click,children:e.page},e.page)}));return t?t.roles.includes("beheerder")?Object(d.jsxs)("div",{className:"buttongrid flex-w",children:[f.pages.beheerder.map((function(e){return Object(d.jsx)(j,{page:e[0],click:function(){return o(e[1])}},e[0])})),Object(d.jsx)(j,{page:"Log uit",click:i},"Log uit")]}):Object(d.jsxs)("div",{className:"grid flex-w",children:[t.roles.map((function(e){return f.pages[e].map((function(e){return Object(d.jsx)(j,{page:e[0],click:function(){return o(e[1])}},e[0])}))})),Object(d.jsx)(j,{page:"Log uit",click:i},"log uit")]}):a?Object(d.jsx)("div",{children:"Loading..."}):r?Object(d.jsx)("div",{children:r}):Object(d.jsx)(d.Fragment,{})}var v=a.p+"static/media/logoBC.dcd27ad3.jpg";function g(){return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"cntr",children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("img",{src:v,alt:"logo"}),Object(d.jsx)(m,{})]})})})}var w=a(24);a(77);function k(){var e=Object(u.c)(),t=Object(l.g)(),a=Object(u.e)(),r=a.loading,n=a.error,s=a.isAuthed,i=Object(w.a)(),j=i.register,b=i.handleSubmit,h=i.formState.errors;Object(c.useEffect)((function(){s&&t.push("/")}));var O=Object(c.useCallback)(function(){var a=Object(p.a)(x.a.mark((function a(c){var r,n;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=c.mail,n=c.wachtwoord,a.next=3,e({mail:r,wachtwoord:n});case 3:a.sent&&t.push("/");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[e,t]);return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"conlogin",children:Object(d.jsx)("div",{className:"wraplogin",children:Object(d.jsxs)("form",{className:"loginform validate-form flex-sb flex-w",onSubmit:b(O),children:[Object(d.jsx)("span",{className:"loginformtitle",children:"Login"}),n?Object(d.jsx)("p",{className:"errorlogin",children:JSON.stringify(n)}):null,Object(d.jsxs)("div",{className:"wrapinput validate-input",children:[Object(d.jsx)("input",Object(o.a)({id:"mail",className:"input",type:"text",defaultValue:"","data-cy":"mail",placeholder:"mail"},j("mail",{required:"Dit is vereist"}))),Object(d.jsx)("span",{className:"focusinput"})]}),h.mail&&Object(d.jsx)("p",{children:h.mail.message}),Object(d.jsxs)("div",{className:"wrapinput validate-input",children:[Object(d.jsx)("input",Object(o.a)({id:"pw",className:"input",type:"password","data-cy":"wachtwoord",placeholder:"wachtwoord"},j("wachtwoord",{required:"Dit is vereist"}))),Object(d.jsx)("span",{className:"focusinput"})]}),h.wachtwoord&&Object(d.jsx)("p",{children:h.wachtwoord.message}),Object(d.jsx)("div",{className:"conloginform",children:Object(d.jsx)("button",{type:"submit",className:"loginbutton",disabled:r,"data-cy":"login",children:"Log in"})})]})})})})}function N(){var e=Object(u.e)(),t=e.lid,a=e.error,r=Object(l.g)(),n=Object(c.useCallback)(Object(p.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.push("/");case 1:case"end":return e.stop()}}),e)}))),[r]),s=Object(c.useCallback)(Object(p.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.push("/wijzigWachtwoord");case 1:case"end":return e.stop()}}),e)}))),[r]);return a?Object(d.jsx)("div",{children:a}):t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("button",{className:"backbutton",onClick:n,children:["<"," Terug"]}),Object(d.jsxs)("div",{className:"grid flex-w accgrid",children:[Object(d.jsx)("label",{className:"acclabel acclabelfirst",children:"Wachtwoord: "}),Object(d.jsx)("div",{className:"accvalue accvaluefirst",children:Object(d.jsx)("button",{className:"accwijzig",onClick:s,children:"Wijzigen"})}),Object(d.jsx)("label",{className:"acclabel",children:"Voornaam: "}),Object(d.jsx)("div",{className:"accvalue",children:t.voornaam}),Object(d.jsx)("label",{className:"acclabel",children:"Achternaam: "}),Object(d.jsx)("div",{className:"accvalue",children:t.achternaam}),Object(d.jsx)("label",{className:"acclabel",children:"Adres: "}),Object(d.jsx)("div",{className:"accvalue",children:t.adres}),Object(d.jsx)("label",{className:"acclabel",children:"Postcode: "}),Object(d.jsx)("div",{className:"accvalue",children:t.postcode}),Object(d.jsx)("label",{className:"acclabel",children:"Woonplaats: "}),Object(d.jsx)("div",{className:"accvalue",children:t.woonplaats}),Object(d.jsx)("label",{className:"acclabel",children:"Geslacht: "}),Object(d.jsx)("div",{className:"accvalue",children:t.geslacht}),Object(d.jsx)("label",{className:"acclabel",children:"Gsm-nummber: "}),Object(d.jsx)("div",{className:"accvalue",children:t.gsm}),Object(d.jsx)("label",{className:"acclabel",children:"Spelertype: "}),Object(d.jsx)("div",{className:"accvalue",children:t.spelertype})]})]}):Object(d.jsx)("div",{children:"Loading..."})}function y(){return Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"cntr",children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("img",{src:v,alt:"logo"}),Object(d.jsx)(N,{})]})})})}var C=a(7);function S(){var e=Object(l.g)(),t=Object(u.b)(),a=Object(u.e)(),r=a.loading,n=a.lid,s=Object(w.a)(),i=s.register,j=s.handleSubmit,b=s.formState.errors,h=Object(c.useState)(null),O=Object(C.a)(h,2),f=O[0],m=O[1],g=Object(c.useCallback)(Object(p.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/accountBeheren");case 1:case"end":return t.stop()}}),t)}))),[e]),k=Object(c.useCallback)(function(){var e=Object(p.a)(x.a.mark((function e(a){var c,r,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.current,r=a.wachtwoord,s=a.wachtwoordd,r!==s){e.next=8;break}return e.next=4,t(null===n||void 0===n?void 0:n.id,c,r);case 4:200===(i=e.sent)?g():m(403===i?"Huidig wachtwoord is incorrect":"Er is iets misgegaan, check server status of conctacteer een beheerder"),e.next=9;break;case 8:m("Nieuw wachtwoord komt niet overeen");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,null===n||void 0===n?void 0:n.id,g]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"limit",children:Object(d.jsx)("div",{className:"cntr",children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("img",{src:v,alt:"logo"}),Object(d.jsxs)("button",{className:"backbutton",onClick:g,children:["<"," Terug"]}),f?Object(d.jsx)("p",{className:"",children:f}):null,Object(d.jsxs)("form",{className:"grid flex-w accgrid",onSubmit:j(k),children:[Object(d.jsx)("label",{className:"acclabel",children:"Huidig wachtwoord: "}),Object(d.jsx)("input",Object(o.a)({className:"accvalue",type:"password",placeholder:"huidig"},i("current",{required:"Dit is vereist"}))),b.current&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"acclabel"}),Object(d.jsx)("p",{className:"accvalue error",children:b.current.message})]}),Object(d.jsx)("label",{className:"acclabel",children:"Nieuw wachtwoord: "}),Object(d.jsx)("input",Object(o.a)({className:"accvalue",type:"password",placeholder:"nieuw"},i("wachtwoord",{required:"Dit is vereist"}))),b.wachtwoord&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"acclabel"}),Object(d.jsx)("p",{className:"accvalue error",children:b.wachtwoord.message})]}),Object(d.jsx)("label",{className:"acclabel",children:"Herhaal nieuw wachtwoord: "}),Object(d.jsx)("input",Object(o.a)({className:"accvalue",type:"password",placeholder:"herhaal"},i("wachtwoordd",{required:"Dit is vereist"}))),b.wachtwoordd&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"acclabel"}),Object(d.jsx)("p",{className:"accvalue error",children:b.wachtwoordd.message})]}),Object(d.jsx)("button",{className:"wwwijzig",type:"submit",disabled:r,children:"Bevestigen"})]})]})})})})}var B=function(){return Object(d.jsx)(u.a,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/login",children:Object(d.jsx)(k,{})}),Object(d.jsx)(l.b,{exact:!0,path:"/DendermondseBC-front",children:Object(d.jsx)(l.a,{to:"/"})}),Object(d.jsx)(h,{exact:!0,path:"/",children:Object(d.jsx)(g,{})}),Object(d.jsx)(h,{exact:!0,path:"/accountBeheren",children:Object(d.jsx)(y,{})}),Object(d.jsx)(h,{exact:!0,path:"/wijzigWachtwoord",children:Object(d.jsx)(S,{})}),Object(d.jsx)(h,{exact:!0,path:"/kledijBestellen"}),Object(d.jsx)(h,{exact:!0,path:"/onkosten"}),Object(d.jsx)(h,{exact:!0,path:"/trainingsuren"}),Object(d.jsx)(h,{exact:!0,path:"/aanwezigheden"}),Object(d.jsx)(h,{exact:!0,path:"lidBeheer"}),Object(d.jsx)(h,{exact:!0,path:"/stuurMail"}),Object(d.jsx)(h,{exact:!0,path:"/aanpassenBV"}),Object(d.jsx)(h,{exact:!0,path:"/vergoedingTrainers"}),Object(d.jsx)(h,{exact:!0,path:"/onkostenKapitein"}),Object(d.jsx)(h,{exact:!0,path:"/onkostenBestuur"}),Object(d.jsx)(h,{exact:!0,path:"/beheerLeden"})]})})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,79)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),L()}},[[78,1,2]]]);
//# sourceMappingURL=main.687926e1.chunk.js.map